{"ast":null,"code":"var _jsxFileName = \"/home/yusuf12148/moringa/Soko-Safi-e-commerce-platform/client/src/components/ChatInterface.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ChatInterface({\n  partnerId,\n  partnerName\n}) {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchMessages = async () => {\n      try {\n        setLoading(true);\n        const response = await fetch(`/messages/${partnerId}`);\n        if (!response.ok) throw new Error('Failed to load messages');\n        const data = await response.json();\n        setMessages(Array.isArray(data) ? data : []);\n      } catch (err) {\n        console.error(\"Error fetching messages:\", err);\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (partnerId) {\n      fetchMessages();\n    }\n  }, [partnerId]);\n  const sendMessage = async () => {\n    if (!newMessage.trim()) return;\n    try {\n      const response = await fetch('/messages', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          content: newMessage,\n          recipient_id: partnerId\n        })\n      });\n      if (response.ok) {\n        const message = await response.json();\n        setMessages(prev => [...prev, message]);\n        setNewMessage('');\n      }\n    } catch (err) {\n      console.error(\"Error sending message:\", err);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-center py-3\",\n    children: \"Loading messages...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"alert alert-danger\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex flex-column border rounded shadow-sm\",\n    style: {\n      height: '500px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-bottom px-3 py-2 bg-light\",\n      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n        className: \"mb-0\",\n        children: [\"Chat with \", partnerName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-grow-1 overflow-auto p-3\",\n      style: {\n        backgroundColor: '#f8f9fa'\n      },\n      children: messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-muted\",\n        children: \"No messages yet. Start the conversation!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this) : messages.map(msg => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `mb-3 d-flex ${msg.sender_id === partnerId ? 'justify-content-start' : 'justify-content-end'}`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `p-2 rounded ${msg.sender_id === partnerId ? 'bg-secondary text-white' : 'bg-primary text-white'}`,\n            children: msg.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"small text-muted text-end mt-1\",\n            children: new Date(msg.timestamp).toLocaleTimeString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 15\n        }, this)\n      }, msg.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-top p-3 bg-white\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          value: newMessage,\n          onChange: e => setNewMessage(e.target.value),\n          onKeyDown: e => e.key === 'Enter' && sendMessage(),\n          placeholder: \"Type your message...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: sendMessage,\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatInterface, \"7P/Gd9n0gPQwD/vLNYZVtCgthBs=\");\n_c = ChatInterface;\nexport default ChatInterface;\nvar _c;\n$RefreshReg$(_c, \"ChatInterface\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","ChatInterface","partnerId","partnerName","_s","messages","setMessages","newMessage","setNewMessage","loading","setLoading","error","setError","fetchMessages","response","fetch","ok","Error","data","json","Array","isArray","err","console","message","sendMessage","trim","method","headers","body","JSON","stringify","content","recipient_id","prev","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","height","backgroundColor","length","map","msg","sender_id","Date","timestamp","toLocaleTimeString","id","type","value","onChange","e","target","onKeyDown","key","placeholder","onClick","_c","$RefreshReg$"],"sources":["/home/yusuf12148/moringa/Soko-Safi-e-commerce-platform/client/src/components/ChatInterface.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nfunction ChatInterface({ partnerId, partnerName }) {\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchMessages = async () => {\n      try {\n        setLoading(true);\n        const response = await fetch(`/messages/${partnerId}`);\n        if (!response.ok) throw new Error('Failed to load messages');\n        const data = await response.json();\n        setMessages(Array.isArray(data) ? data : []);\n      } catch (err) {\n        console.error(\"Error fetching messages:\", err);\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (partnerId) {\n      fetchMessages();\n    }\n  }, [partnerId]);\n\n  const sendMessage = async () => {\n    if (!newMessage.trim()) return;\n\n    try {\n      const response = await fetch('/messages', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          content: newMessage,\n          recipient_id: partnerId\n        })\n      });\n\n      if (response.ok) {\n        const message = await response.json();\n        setMessages(prev => [...prev, message]);\n        setNewMessage('');\n      }\n    } catch (err) {\n      console.error(\"Error sending message:\", err);\n    }\n  };\n\n  if (loading) return <div className=\"text-center py-3\">Loading messages...</div>;\n  if (error) return <div className=\"alert alert-danger\">{error}</div>;\n\n  return (\n    <div className=\"d-flex flex-column border rounded shadow-sm\" style={{ height: '500px' }}>\n      <div className=\"border-bottom px-3 py-2 bg-light\">\n        <h5 className=\"mb-0\">Chat with {partnerName}</h5>\n      </div>\n\n      <div className=\"flex-grow-1 overflow-auto p-3\" style={{ backgroundColor: '#f8f9fa' }}>\n        {messages.length === 0 ? (\n          <p className=\"text-muted\">No messages yet. Start the conversation!</p>\n        ) : (\n          messages.map(msg => (\n            <div\n              key={msg.id}\n              className={`mb-3 d-flex ${msg.sender_id === partnerId ? 'justify-content-start' : 'justify-content-end'}`}\n            >\n              <div>\n                <div className={`p-2 rounded ${msg.sender_id === partnerId ? 'bg-secondary text-white' : 'bg-primary text-white'}`}>\n                  {msg.content}\n                </div>\n                <div className=\"small text-muted text-end mt-1\">\n                  {new Date(msg.timestamp).toLocaleTimeString()}\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n\n      <div className=\"border-top p-3 bg-white\">\n        <div className=\"input-group\">\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            value={newMessage}\n            onChange={(e) => setNewMessage(e.target.value)}\n            onKeyDown={(e) => e.key === 'Enter' && sendMessage()}\n            placeholder=\"Type your message...\"\n          />\n          <button className=\"btn btn-primary\" onClick={sendMessage}>\n            Send\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ChatInterface;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnD,SAASC,aAAaA,CAAC;EAAEC,SAAS;EAAEC;AAAY,CAAC,EAAE;EAAAC,EAAA;EACjD,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACU,UAAU,EAAEC,aAAa,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACY,OAAO,EAAEC,UAAU,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACc,KAAK,EAAEC,QAAQ,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAExCC,SAAS,CAAC,MAAM;IACd,MAAMe,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAI;QACFH,UAAU,CAAC,IAAI,CAAC;QAChB,MAAMI,QAAQ,GAAG,MAAMC,KAAK,CAAC,aAAab,SAAS,EAAE,CAAC;QACtD,IAAI,CAACY,QAAQ,CAACE,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,yBAAyB,CAAC;QAC5D,MAAMC,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;QAClCb,WAAW,CAACc,KAAK,CAACC,OAAO,CAACH,IAAI,CAAC,GAAGA,IAAI,GAAG,EAAE,CAAC;MAC9C,CAAC,CAAC,OAAOI,GAAG,EAAE;QACZC,OAAO,CAACZ,KAAK,CAAC,0BAA0B,EAAEW,GAAG,CAAC;QAC9CV,QAAQ,CAACU,GAAG,CAACE,OAAO,CAAC;MACvB,CAAC,SAAS;QACRd,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAED,IAAIR,SAAS,EAAE;MACbW,aAAa,CAAC,CAAC;IACjB;EACF,CAAC,EAAE,CAACX,SAAS,CAAC,CAAC;EAEf,MAAMuB,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAI,CAAClB,UAAU,CAACmB,IAAI,CAAC,CAAC,EAAE;IAExB,IAAI;MACF,MAAMZ,QAAQ,GAAG,MAAMC,KAAK,CAAC,WAAW,EAAE;QACxCY,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACnBC,OAAO,EAAEzB,UAAU;UACnB0B,YAAY,EAAE/B;QAChB,CAAC;MACH,CAAC,CAAC;MAEF,IAAIY,QAAQ,CAACE,EAAE,EAAE;QACf,MAAMQ,OAAO,GAAG,MAAMV,QAAQ,CAACK,IAAI,CAAC,CAAC;QACrCb,WAAW,CAAC4B,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEV,OAAO,CAAC,CAAC;QACvChB,aAAa,CAAC,EAAE,CAAC;MACnB;IACF,CAAC,CAAC,OAAOc,GAAG,EAAE;MACZC,OAAO,CAACZ,KAAK,CAAC,wBAAwB,EAAEW,GAAG,CAAC;IAC9C;EACF,CAAC;EAED,IAAIb,OAAO,EAAE,oBAAOT,OAAA;IAAKmC,SAAS,EAAC,kBAAkB;IAAAC,QAAA,EAAC;EAAmB;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;EAC/E,IAAI7B,KAAK,EAAE,oBAAOX,OAAA;IAAKmC,SAAS,EAAC,oBAAoB;IAAAC,QAAA,EAAEzB;EAAK;IAAA0B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAM,CAAC;EAEnE,oBACExC,OAAA;IAAKmC,SAAS,EAAC,6CAA6C;IAACM,KAAK,EAAE;MAAEC,MAAM,EAAE;IAAQ,CAAE;IAAAN,QAAA,gBACtFpC,OAAA;MAAKmC,SAAS,EAAC,kCAAkC;MAAAC,QAAA,eAC/CpC,OAAA;QAAImC,SAAS,EAAC,MAAM;QAAAC,QAAA,GAAC,YAAU,EAACjC,WAAW;MAAA;QAAAkC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC9C,CAAC,eAENxC,OAAA;MAAKmC,SAAS,EAAC,+BAA+B;MAACM,KAAK,EAAE;QAAEE,eAAe,EAAE;MAAU,CAAE;MAAAP,QAAA,EAClF/B,QAAQ,CAACuC,MAAM,KAAK,CAAC,gBACpB5C,OAAA;QAAGmC,SAAS,EAAC,YAAY;QAAAC,QAAA,EAAC;MAAwC;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,GAEtEnC,QAAQ,CAACwC,GAAG,CAACC,GAAG,iBACd9C,OAAA;QAEEmC,SAAS,EAAE,eAAeW,GAAG,CAACC,SAAS,KAAK7C,SAAS,GAAG,uBAAuB,GAAG,qBAAqB,EAAG;QAAAkC,QAAA,eAE1GpC,OAAA;UAAAoC,QAAA,gBACEpC,OAAA;YAAKmC,SAAS,EAAE,eAAeW,GAAG,CAACC,SAAS,KAAK7C,SAAS,GAAG,yBAAyB,GAAG,uBAAuB,EAAG;YAAAkC,QAAA,EAChHU,GAAG,CAACd;UAAO;YAAAK,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC,eACNxC,OAAA;YAAKmC,SAAS,EAAC,gCAAgC;YAAAC,QAAA,EAC5C,IAAIY,IAAI,CAACF,GAAG,CAACG,SAAS,CAAC,CAACC,kBAAkB,CAAC;UAAC;YAAAb,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1C,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC,GAVDM,GAAG,CAACK,EAAE;QAAAd,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAWR,CACN;IACF;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,eAENxC,OAAA;MAAKmC,SAAS,EAAC,yBAAyB;MAAAC,QAAA,eACtCpC,OAAA;QAAKmC,SAAS,EAAC,aAAa;QAAAC,QAAA,gBAC1BpC,OAAA;UACEoD,IAAI,EAAC,MAAM;UACXjB,SAAS,EAAC,cAAc;UACxBkB,KAAK,EAAE9C,UAAW;UAClB+C,QAAQ,EAAGC,CAAC,IAAK/C,aAAa,CAAC+C,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;UAC/CI,SAAS,EAAGF,CAAC,IAAKA,CAAC,CAACG,GAAG,KAAK,OAAO,IAAIjC,WAAW,CAAC,CAAE;UACrDkC,WAAW,EAAC;QAAsB;UAAAtB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnC,CAAC,eACFxC,OAAA;UAAQmC,SAAS,EAAC,iBAAiB;UAACyB,OAAO,EAAEnC,WAAY;UAAAW,QAAA,EAAC;QAE1D;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACpC,EAAA,CAlGQH,aAAa;AAAA4D,EAAA,GAAb5D,aAAa;AAoGtB,eAAeA,aAAa;AAAC,IAAA4D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}