{"ast":null,"code":"import React,{useState,useEffect}from'react';import ProductCard from'../components/ProductCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function HomePage(){const[products,setProducts]=useState([]);const[filteredProducts,setFilteredProducts]=useState([]);const[categories,setCategories]=useState([]);const[selectedCategory,setSelectedCategory]=useState('All');const[searchTerm,setSearchTerm]=useState('');const[loading,setLoading]=useState(true);useEffect(()=>{const fetchProducts=async()=>{try{const response=await fetch('/products');if(response.ok){const data=await response.json();setProducts(data);setFilteredProducts(data);// Extract unique categories\nconst uniqueCategories=['All',...new Set(data.map(p=>p.category||'Uncategorized'))];setCategories(uniqueCategories);}}catch(error){console.error(\"Error fetching products:\",error);}finally{setLoading(false);}};fetchProducts();},[]);useEffect(()=>{// Filter based on category and search term\nlet filtered=[...products];if(selectedCategory!=='All'){filtered=filtered.filter(p=>(p.category||'Uncategorized')===selectedCategory);}if(searchTerm.trim()!==''){filtered=filtered.filter(p=>p.name.toLowerCase().includes(searchTerm.toLowerCase()));}setFilteredProducts(filtered);},[searchTerm,selectedCategory,products]);if(loading)return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center my-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-3\",children:\"Loading products...\"})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"container py-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-primary text-white p-5 rounded shadow-sm mb-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"display-5\",children:\"Welcome to Soko Safi!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"lead mb-0\",children:\"Browse a wide range of potraits from nearby vendors.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row align-items-center mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 mb-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Search products...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 mb-2\",children:/*#__PURE__*/_jsx(\"select\",{className:\"form-select\",value:selectedCategory,onChange:e=>setSelectedCategory(e.target.value),children:categories.map((category,i)=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category},i))})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 text-md-end\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-muted\",children:[filteredProducts.length,\" product(s) found\"]})})]}),filteredProducts.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-warning\",children:\"No products match your search.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"row g-4\",children:filteredProducts.map(product=>/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6 col-md-4 col-lg-3\",children:/*#__PURE__*/_jsx(ProductCard,{product:product})},product.id))})]});}export default HomePage;","map":{"version":3,"names":["React","useState","useEffect","ProductCard","jsx","_jsx","jsxs","_jsxs","HomePage","products","setProducts","filteredProducts","setFilteredProducts","categories","setCategories","selectedCategory","setSelectedCategory","searchTerm","setSearchTerm","loading","setLoading","fetchProducts","response","fetch","ok","data","json","uniqueCategories","Set","map","p","category","error","console","filtered","filter","trim","name","toLowerCase","includes","className","children","role","type","placeholder","value","onChange","e","target","i","length","product","id"],"sources":["/home/yusuf12148/moringa/Soko-Safi-e-commerce-platform/client/src/pages/HomePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ProductCard from '../components/ProductCard';\n\nfunction HomePage() {\n    const [products, setProducts] = useState([]);\n    const [filteredProducts, setFilteredProducts] = useState([]);\n    const [categories, setCategories] = useState([]);\n    const [selectedCategory, setSelectedCategory] = useState('All');\n    const [searchTerm, setSearchTerm] = useState('');\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        const fetchProducts = async () => {\n            try {\n                const response = await fetch('/products');\n                if (response.ok) {\n                    const data = await response.json();\n                    setProducts(data);\n                    setFilteredProducts(data);\n\n                    // Extract unique categories\n                    const uniqueCategories = ['All', ...new Set(data.map(p => p.category || 'Uncategorized'))];\n                    setCategories(uniqueCategories);\n                }\n            } catch (error) {\n                console.error(\"Error fetching products:\", error);\n            } finally {\n                setLoading(false);\n            }\n        };\n        fetchProducts();\n    }, []);\n\n    useEffect(() => {\n        // Filter based on category and search term\n        let filtered = [...products];\n\n        if (selectedCategory !== 'All') {\n            filtered = filtered.filter(p => (p.category || 'Uncategorized') === selectedCategory);\n        }\n\n        if (searchTerm.trim() !== '') {\n            filtered = filtered.filter(p =>\n                p.name.toLowerCase().includes(searchTerm.toLowerCase())\n            );\n        }\n\n        setFilteredProducts(filtered);\n    }, [searchTerm, selectedCategory, products]);\n\n    if (loading) return (\n        <div className=\"text-center my-5\">\n            <div className=\"spinner-border text-primary\" role=\"status\" />\n            <p className=\"mt-3\">Loading products...</p>\n        </div>\n    );\n\n    return (\n        <div className=\"container py-4\">\n            {/* Hero Section */}\n            <div className=\"bg-primary text-white p-5 rounded shadow-sm mb-4\">\n                <h1 className=\"display-5\">Welcome to Soko Safi!</h1>\n                <p className=\"lead mb-0\">Browse a wide range of potraits from nearby vendors.</p>\n            </div>\n\n            {/* Filters */}\n            <div className=\"row align-items-center mb-4\">\n                <div className=\"col-md-4 mb-2\">\n                    <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        placeholder=\"Search products...\"\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                    />\n                </div>\n                <div className=\"col-md-4 mb-2\">\n                    <select\n                        className=\"form-select\"\n                        value={selectedCategory}\n                        onChange={(e) => setSelectedCategory(e.target.value)}\n                    >\n                        {categories.map((category, i) => (\n                            <option key={i} value={category}>{category}</option>\n                        ))}\n                    </select>\n                </div>\n                <div className=\"col-md-4 text-md-end\">\n                    <span className=\"text-muted\">{filteredProducts.length} product(s) found</span>\n                </div>\n            </div>\n\n            {/* Product Grid */}\n            {filteredProducts.length === 0 ? (\n                <div className=\"alert alert-warning\">No products match your search.</div>\n            ) : (\n                <div className=\"row g-4\">\n                    {filteredProducts.map(product => (\n                        <div className=\"col-sm-6 col-md-4 col-lg-3\" key={product.id}>\n                            <ProductCard product={product} />\n                        </div>\n                    ))}\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default HomePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}