{"ast":null,"code":"import _objectSpread from\"/home/yusuf12148/moringa/Soko-Safi-e-commerce-platform/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useContext}from'react';import{useNavigate}from'react-router-dom';import{useFormik}from'formik';import*as Yup from'yup';import{UserContext}from'../context/UserProvider';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function AuthForm(_ref){let{isLogin}=_ref;const{login}=useContext(UserContext);const navigate=useNavigate();const validationSchema=Yup.object(_objectSpread({username:Yup.string().required('Required'),password:Yup.string().min(6,'Must be at least 6 characters').required('Required')},!isLogin&&{email:Yup.string().email('Invalid email format').required('Required'),role:Yup.string().oneOf(['customer','vendor']).required('Required')}));const formik=useFormik({initialValues:{username:'',password:'',email:'',role:'customer'},validationSchema,onSubmit:async(values,_ref2)=>{let{setErrors}=_ref2;const endpoint=isLogin?'/login':'/signup';try{const response=await fetch(endpoint,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(values)});if(response.ok){const userData=await response.json();login(userData);navigate('/profile');}else{const errorData=await response.json();setErrors({api:errorData.error||'An error occurred.'});}}catch(error){setErrors({api:'Network error. Please try again.'});}}});return/*#__PURE__*/_jsxs(\"form\",{onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",className:\"form-label\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({id:\"username\",type:\"text\",className:\"form-control \".concat(formik.touched.username&&formik.errors.username?'is-invalid':'')},formik.getFieldProps('username'))),formik.touched.username&&formik.errors.username&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:formik.errors.username})]}),!isLogin&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({id:\"email\",type:\"email\",className:\"form-control \".concat(formik.touched.email&&formik.errors.email?'is-invalid':'')},formik.getFieldProps('email'))),formik.touched.email&&formik.errors.email&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:formik.errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"role\",className:\"form-label\",children:\"I am a:\"}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({id:\"role\",className:\"form-select \".concat(formik.touched.role&&formik.errors.role?'is-invalid':'')},formik.getFieldProps('role')),{},{children:[/*#__PURE__*/_jsx(\"option\",{value:\"customer\",children:\"Customer\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vendor\",children:\"Vendor\"})]})),formik.touched.role&&formik.errors.role&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:formik.errors.role})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({id:\"password\",type:\"password\",className:\"form-control \".concat(formik.touched.password&&formik.errors.password?'is-invalid':'')},formik.getFieldProps('password'))),formik.touched.password&&formik.errors.password&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:formik.errors.password})]}),formik.errors.api&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:formik.errors.api}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:isLogin?'Login':'Sign Up'})})]});}export default AuthForm;","map":{"version":3,"names":["React","useContext","useNavigate","useFormik","Yup","UserContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AuthForm","_ref","isLogin","login","navigate","validationSchema","object","_objectSpread","username","string","required","password","min","email","role","oneOf","formik","initialValues","onSubmit","values","_ref2","setErrors","endpoint","response","fetch","method","headers","body","JSON","stringify","ok","userData","json","errorData","api","error","handleSubmit","children","className","htmlFor","id","type","concat","touched","errors","getFieldProps","value"],"sources":["/home/yusuf12148/moringa/Soko-Safi-e-commerce-platform/client/src/components/AuthForm.js"],"sourcesContent":["import React, { useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport { UserContext } from '../context/UserProvider';\n\nfunction AuthForm({ isLogin }) {\n    const { login } = useContext(UserContext);\n    const navigate = useNavigate();\n\n    const validationSchema = Yup.object({\n        username: Yup.string().required('Required'),\n        password: Yup.string().min(6, 'Must be at least 6 characters').required('Required'),\n        ...(!isLogin && {\n            email: Yup.string().email('Invalid email format').required('Required'),\n            role: Yup.string().oneOf(['customer', 'vendor']).required('Required'),\n        }),\n    });\n\n    const formik = useFormik({\n        initialValues: {\n            username: '',\n            password: '',\n            email: '',\n            role: 'customer'\n        },\n        validationSchema,\n        onSubmit: async (values, { setErrors }) => {\n            const endpoint = isLogin ? '/login' : '/signup';\n            try {\n                const response = await fetch(endpoint, {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify(values),\n                });\n                if (response.ok) {\n                    const userData = await response.json();\n                    login(userData);\n                    navigate('/profile');\n                } else {\n                    const errorData = await response.json();\n                    setErrors({ api: errorData.error || 'An error occurred.' });\n                }\n            } catch (error) {\n                setErrors({ api: 'Network error. Please try again.' });\n            }\n        },\n    });\n\n    return (\n        <form onSubmit={formik.handleSubmit}>\n            <div className=\"mb-3\">\n                <label htmlFor=\"username\" className=\"form-label\">Username</label>\n                <input\n                    id=\"username\"\n                    type=\"text\"\n                    className={`form-control ${formik.touched.username && formik.errors.username ? 'is-invalid' : ''}`}\n                    {...formik.getFieldProps('username')}\n                />\n                {formik.touched.username && formik.errors.username && (\n                    <div className=\"invalid-feedback\">{formik.errors.username}</div>\n                )}\n            </div>\n\n            {!isLogin && (\n                <>\n                    <div className=\"mb-3\">\n                        <label htmlFor=\"email\" className=\"form-label\">Email</label>\n                        <input\n                            id=\"email\"\n                            type=\"email\"\n                            className={`form-control ${formik.touched.email && formik.errors.email ? 'is-invalid' : ''}`}\n                            {...formik.getFieldProps('email')}\n                        />\n                        {formik.touched.email && formik.errors.email && (\n                            <div className=\"invalid-feedback\">{formik.errors.email}</div>\n                        )}\n                    </div>\n\n                    <div className=\"mb-3\">\n                        <label htmlFor=\"role\" className=\"form-label\">I am a:</label>\n                        <select\n                            id=\"role\"\n                            className={`form-select ${formik.touched.role && formik.errors.role ? 'is-invalid' : ''}`}\n                            {...formik.getFieldProps('role')}\n                        >\n                            <option value=\"customer\">Customer</option>\n                            <option value=\"vendor\">Vendor</option>\n                        </select>\n                        {formik.touched.role && formik.errors.role && (\n                            <div className=\"invalid-feedback\">{formik.errors.role}</div>\n                        )}\n                    </div>\n                </>\n            )}\n\n            <div className=\"mb-3\">\n                <label htmlFor=\"password\" className=\"form-label\">Password</label>\n                <input\n                    id=\"password\"\n                    type=\"password\"\n                    className={`form-control ${formik.touched.password && formik.errors.password ? 'is-invalid' : ''}`}\n                    {...formik.getFieldProps('password')}\n                />\n                {formik.touched.password && formik.errors.password && (\n                    <div className=\"invalid-feedback\">{formik.errors.password}</div>\n                )}\n            </div>\n\n            {formik.errors.api && (\n                <div className=\"alert alert-danger\">{formik.errors.api}</div>\n            )}\n\n            <div className=\"d-grid\">\n                <button type=\"submit\" className=\"btn btn-primary\">\n                    {isLogin ? 'Login' : 'Sign Up'}\n                </button>\n            </div>\n        </form>\n    );\n}\n\nexport default AuthForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}