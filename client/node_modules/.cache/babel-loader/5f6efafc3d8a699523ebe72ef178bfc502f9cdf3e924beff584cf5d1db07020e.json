{"ast":null,"code":"var _jsxFileName = \"/home/yusuf12148/moringa/Soko-Safi-e-commerce-platform/client/src/components/ChatInterface.js\",\n  _s = $RefreshSig$();\n// client/src/components/ChatInterface.js\nimport React, { useState, useEffect, useContext } from 'react';\nimport { UserContext } from '../context/UserProvider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ChatInterface({\n  partnerId\n}) {\n  _s();\n  const {\n    user\n  } = useContext(UserContext);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [partner, setPartner] = useState(null);\n  useEffect(() => {\n    if (partnerId) {\n      // Fetch partner info\n      fetch(`/vendors/${partnerId}`).then(r => r.json()).then(setPartner);\n\n      // Fetch messages\n      fetch(`/messages/${partnerId}`).then(r => r.json()).then(setMessages);\n    }\n  }, [partnerId]);\n  const sendMessage = () => {\n    if (!newMessage.trim()) return;\n    fetch('/messages', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        content: newMessage,\n        recipient_id: partnerId\n      })\n    }).then(r => r.json()).then(message => {\n      setMessages([...messages, message]);\n      setNewMessage('');\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      border: '1px solid #ccc',\n      borderRadius: '8px',\n      padding: '16px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '16px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Chat with \", partner === null || partner === void 0 ? void 0 : partner.username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: '300px',\n        overflowY: 'auto',\n        marginBottom: '16px',\n        border: '1px solid #eee',\n        padding: '8px'\n      },\n      children: messages.map(msg => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: msg.sender_id === user.id ? 'right' : 'left',\n          margin: '8px 0'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'inline-block',\n            padding: '8px 12px',\n            borderRadius: '12px',\n            backgroundColor: msg.sender_id === user.id ? '#007bff' : '#f1f1f1',\n            color: msg.sender_id === user.id ? 'white' : 'black'\n          },\n          children: msg.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '0.8em',\n            color: '#666'\n          },\n          children: new Date(msg.timestamp).toLocaleTimeString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this)]\n      }, msg.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newMessage,\n        onChange: e => setNewMessage(e.target.value),\n        onKeyPress: e => e.key === 'Enter' && sendMessage(),\n        style: {\n          flex: 1,\n          padding: '8px',\n          marginRight: '8px'\n        },\n        placeholder: \"Type your message...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sendMessage,\n        style: {\n          padding: '8px 16px'\n        },\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatInterface, \"rRtjnpTIIaLbLKk1QkhhoDHbi0w=\");\n_c = ChatInterface;\nexport default ChatInterface;\nvar _c;\n$RefreshReg$(_c, \"ChatInterface\");","map":{"version":3,"names":["React","useState","useEffect","useContext","UserContext","jsxDEV","_jsxDEV","ChatInterface","partnerId","_s","user","messages","setMessages","newMessage","setNewMessage","partner","setPartner","fetch","then","r","json","sendMessage","trim","method","headers","body","JSON","stringify","content","recipient_id","message","style","border","borderRadius","padding","children","marginBottom","username","fileName","_jsxFileName","lineNumber","columnNumber","height","overflowY","map","msg","textAlign","sender_id","id","margin","display","backgroundColor","color","fontSize","Date","timestamp","toLocaleTimeString","type","value","onChange","e","target","onKeyPress","key","flex","marginRight","placeholder","onClick","_c","$RefreshReg$"],"sources":["/home/yusuf12148/moringa/Soko-Safi-e-commerce-platform/client/src/components/ChatInterface.js"],"sourcesContent":["// client/src/components/ChatInterface.js\nimport React, { useState, useEffect, useContext } from 'react';\nimport { UserContext } from '../context/UserProvider';\n\nfunction ChatInterface({ partnerId }) {\n  const { user } = useContext(UserContext);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [partner, setPartner] = useState(null);\n\n  useEffect(() => {\n    if (partnerId) {\n      // Fetch partner info\n      fetch(`/vendors/${partnerId}`)\n        .then(r => r.json())\n        .then(setPartner);\n      \n      // Fetch messages\n      fetch(`/messages/${partnerId}`)\n        .then(r => r.json())\n        .then(setMessages);\n    }\n  }, [partnerId]);\n\n  const sendMessage = () => {\n    if (!newMessage.trim()) return;\n    \n    fetch('/messages', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        content: newMessage,\n        recipient_id: partnerId\n      })\n    })\n    .then(r => r.json())\n    .then(message => {\n      setMessages([...messages, message]);\n      setNewMessage('');\n    });\n  };\n\n  return (\n    <div style={{ border: '1px solid #ccc', borderRadius: '8px', padding: '16px' }}>\n      <div style={{ marginBottom: '16px' }}>\n        <h3>Chat with {partner?.username}</h3>\n      </div>\n      \n      <div style={{ height: '300px', overflowY: 'auto', marginBottom: '16px', border: '1px solid #eee', padding: '8px' }}>\n        {messages.map(msg => (\n          <div \n            key={msg.id} \n            style={{ \n              textAlign: msg.sender_id === user.id ? 'right' : 'left',\n              margin: '8px 0'\n            }}\n          >\n            <div style={{\n              display: 'inline-block',\n              padding: '8px 12px',\n              borderRadius: '12px',\n              backgroundColor: msg.sender_id === user.id ? '#007bff' : '#f1f1f1',\n              color: msg.sender_id === user.id ? 'white' : 'black'\n            }}>\n              {msg.content}\n            </div>\n            <div style={{ fontSize: '0.8em', color: '#666' }}>\n              {new Date(msg.timestamp).toLocaleTimeString()}\n            </div>\n          </div>\n        ))}\n      </div>\n      \n      <div style={{ display: 'flex' }}>\n        <input\n          type=\"text\"\n          value={newMessage}\n          onChange={(e) => setNewMessage(e.target.value)}\n          onKeyPress={(e) => e.key === 'Enter' && sendMessage()}\n          style={{ flex: 1, padding: '8px', marginRight: '8px' }}\n          placeholder=\"Type your message...\"\n        />\n        <button onClick={sendMessage} style={{ padding: '8px 16px' }}>\n          Send\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default ChatInterface;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}